<!DOCTYPE html>
<html>

<head>
  <title>Complaint App With Geo-Location</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <!-- FILES FOR LOGIN PAGE -->
  <link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
  <link rel="stylesheet" type="text/css" href="css/util.css">
  <link rel="stylesheet" type="text/css" href="css/main.css">
  <!-- FILES FOR LEAFLET MAP -->
  <link rel="stylesheet" href="leaflet/leaflet.css" />
  <script src="leaflet/leaflet.js"></script>
  <link rel="stylesheet" type="text/css" href="js/jquery.mobile-1.4.5.css">
  <script src="js/jquery.js"></script>
  <script src="js/jquery.mobile-1.4.5.js"></script>
  <script src="cordova.js"></script>
  <script type="text/javascript" src="js/validation.js"></script>
  <script type="text/javascript" src="js/Reg_database.js"></script>
 
  <style>
    .title {
      align-items: center;
    }

    .greet {
      width: inherit;
      margin-top: 80px;
      margin-left: 10px;
      margin-right: 10px;

    }

    .center {
      margin-left: 10px;
      margin-right: 20px;
    }

    #mainpglogo {
      width: 35%;
      display: inline-block;
      vertical-align: middle;
    }

    #smalllogo,
    #smalllogo1 {
      width: 11.5%;
    }

    .topcolor {
      background-color: #f2f2f2;
      text-align: left;
      height: 50px;
    }

    .botnav {
      height: 50px;
      align-items: center;
    }

    .zoli {
      background-color: green;
    }

    #zo {
      background-color: #ff8080;
      color: white;
      font-weight: 300;
    }

    .navlogo {
      width: 100%;
      padding: 20px;
    }

    .alignname {
      text-align: center;
    }

    #policeview,
    #fireview,
    #hospitalview,
    #busview,
    #atmview,
    #municipalityview,
    #bankview,
    #postview,
    #gasview {
      display: none;
      width: inherit;
      height: 600px;
    }

    /**Sticks the footer to the bottom of the page */
    [data-role=page] {
      height: 100% !important;
      position: relative !important;
    }

    [data-role=footer] {
      bottom: 0;
      position: absolute !important;
      top: auto !important;
      width: 100%;
    }
  </style>
</head>

<body>
  <!-- MAIN LOGIN PAGE -->
  <div data-role="page" id="login">
    <div class="greet">
      <div class="login100-form validate-form">
        <span class="login100-form-title p-b-26 title">
          Welcome
        </span>
        <span class="login100-form-title p-b-48">
          <img id="mainpglogo" src="img/logo.png">
        </span>
        <div data-role="main" class="ui-content center">
          <form id="myform" method="post" onsubmit="return submitThis()">
            <input name="un" id="uname" type="text" placeholder="username" required />
            <span class="er_form" id="uname_er"></span>
            <input name="pws" id="passw" type="password" placeholder="password" minlength="8" maxlength="8" required />
            <span class="er_form" id="passw_er"></span>
            
             <input id="pop" type="submit" value="Login" class="zoli ui-btn ui-corner-all" />

          </form>
        </div>
        <a href="#" id="calc" class="ui-btn">Anchor</a>
        <button class="ui-btn">Button</button>
        <div class="text-center p-t-115">
          <span class="txt1">
            Don’t have an account?
          </span>

          <a class="txt2" href="#regpg" data-transition="slide">
            Sign Up
          </a>
        </div>
      </div>
    </div>
  </div>
  <!-- HOMEPAGE -->
  <div data-role="page" id="home">
    <!-- HOMEPAGE header for the page -->
    <div data-role="header" class="topcolor">
      <img id="smalllogo1" src="img/logo.png" class="ui-btn-left" />
      <h3>Mauritius Services</h3>
    </div>
    <!-- HOMEPAGE MAIN -->
    <div data-role="main" id="homemain" class="ui-content">
      <br>
      <h4>what`s nearby</h4>
      <br>
      <div id="buttongroup">
        <div class="ui-grid-b">
          <div class="ui-block-a"><a id="police" href="#policeview" data-transition="flip"><img class="navlogo" src="img/police.png"></a>
            <h5 class="alignname">Police Station</h5>
          </div>
          <div class="ui-block-b"><a id="fire" href="#fireview" data-transition="flip"><img class="navlogo" src="img/firefighter.png"></a>
            <h5 class="alignname">Fire Station</h5>
          </div>
          <div class="ui-block-c"><a id="hospital" href="#hospitalview" data-transition="flip"><img class="navlogo" src="img/hospital.png"></a>
            <h5 class="alignname">Hospital</h5>
          </div>
        </div>
        <br>
        <div class="ui-grid-b">
          <div class="ui-block-a"><a id="busstop" href="#busview" data-transition="flip"><img class="navlogo" src="img/bus-stop.png"></a>
            <h5 class="alignname">Bus Stop</h5>
          </div>
          <div class="ui-block-b"><a id="atm" href="#atmview" data-transition="flip"><img class="navlogo" src="img/atm.png"></a>
            <h5 class="alignname">ATM</h5>
          </div>
          <div class="ui-block-c"><a id="muni" href="#municipalityview" data-transition="flip"><img class="navlogo" src="img/city-hall.png"></a>
            <h5 class="alignname">Municipality</h5>
          </div>
        </div>
        <br>
        <div class="ui-grid-b">
          <div class="ui-block-a"><a id="bank" href="#bankview" data-transition="flip"><img class="navlogo" src="img/bank.png"></a>
            <h5 class="alignname">Bank</h5>
          </div>
          <div class="ui-block-b"><a id="post" href="#postview"><img class="navlogo" src="img/postman.png"></a>
            <h5 class="alignname">Post Office</h5>
          </div>
          <div class="ui-block-c"><a id="gas" href="#gasview"><img class="navlogo" src="img/gas.png"></a>
            <h5 class="alignname">Filling Station</h5>
          </div>
        </div>
      </div>
      <div id="policeview"></div>
      <div id="fireview"></div>
      <div id="hospitalview"></div>
      <div id="busview"></div>
      <div id="atmview"></div>
      <div id="municipalityview"></div>
      <div id="bankview"></div>
      <div id="postview"></div>
      <div id="gasview"></div>
    </div>
    <!-- HOMEPAGE footer -->
    <div data-role="footer">
      <div data-role="navbar">
        <ul>
          <li><a id="home1" href="#home" data-icon="home" ico class="ui-btn-active botnav"></a></li>
          <li><a href="#camera" data-icon="camera" class="botnav"></a></li>
          <li><a href="#profile" data-icon="user" class="botnav"></a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- REGISTER PAGE -->
  <div id="regpg" data-role="page">
    <!-- HOMEPAGE header for the page -->
    <div data-role="header" class="topcolor">
      <img id="smalllogo" src="img/logo.png" class="ui-btn-left" />
      <h3>Mauritius Services</h3>
    </div>
    <br>
    <!-- MAIN REGISTER PAGE -->
    <div data-role="main" class="ui-content">
      <form method="post" id="registration_form" onsubmit="return submitForm()">
        <input name="myname" type="text" placeholder="Name" id="fname" required />
        <span class="er_form" id="fname_er"></span>
        <input name="surname" type="text" placeholder="Surname" id="sname" required />
        <span class="er_form" id="sname_er"></span>
        <input name="national" type="text" placeholder="K234689001245C" id="nic" required />
        <span class="er_form" id="nic_er"></span>
        <input name="address" type="text" placeholder="Forbach Rd, Cottage" id="add"  required />
        <span class="er_form" id="add_er"></span>
       <fieldset data-role="collapsible" id="choose" data-expanded-icon="carat-u" data-collapsed-icon="carat-d" data-iconpos="right" >
          <legend>Choose District </legend>
          <div data-role="controlgroup" id="dist">
            <label><input name="chose"  type="radio" value="rdr" required>Riviere Du Rempart</label>
            <label><input name="chose"  type="radio" value="pamp">Pamplemousses</label>
            <label><input name="chose"  type="radio" value="p-l">Port-Louis</label>
            <label><input name="chose"  type="radio" value="moka">Moka</label>
            <label><input name="chose"  type="radio" value="flacq" >Flacq</label>
            <label><input name="chose"  type="radio" value="r-n">Riviere-Noire</label>
            <label><input name="chose"  type="radio" value="p-w">Plaines-Wilhems</label>
            <label><input name="chose"  type="radio" value="grand-port">Grand-Port</label>
            <label><input name="chose"  type="radio" value="savanne">Savanne</label>
          </div>
        </fieldset>
        <span class="er_form" id="dist_er"></span>
        <input name="eml" type="email" placeholder="user@mail.com" id="email" required  />
        <span class="er_form" id="email_er"></span>
        <input name="pw" type="password" placeholder="password" id="pass" maxlength="8"  required />
        <span class="er_form" id="pass_er"></span>
        <input name="cPw" type="password" placeholder="confirm password" id="cpass" maxlength="8"  required />
        <span class="er_form" id="cpass_er"></span>
        <br>
        <input type="submit" value="Register" class="zoli" />
      </form>
    </div>
   
  </div>
  <script>
    var lat;
    var longitude;
      //This is for main page current location
      if (navigator.geolocation == undefined) {
        alert("Gelocation undefined");
      } else {
        //alert("Geolocation Available");
        navigator.geolocation.getCurrentPosition(userLocated, LocationError);

        function userLocated(position) {
          lat = position.coords.latitude;
          longitude = position.coords.longitude;
          alert("Lat: " + lat + ", Lon: " + longitude);
        }

        function LocationError(error) {
          switch (error.code) {
            case error.PERMISSION_DENIED:
              alert("Permission Denied-" + error.message);
              break;

            case error.POSITION_UNAVAILABLE:
              alert("Request Time out-" + error.message);

          }
        }
      }
    //CODE FOR HOME FUNCTIONALITY
    $(document).ready(function() {
      //Displaying homepage and hidding all other divs
      $("#home1").click(function() {
        $("#policeview").hide("fast");
        $("#fireview").hide("fast");
        $("#hospitalview").hide("fast");
        $("#busview").hide("fast");
        $("#atmview").hide("fast");
        $("#municipalityview").hide("fast");
        $("#bankview").hide("fast");
        $("#postview").hide("fast");
        $("#gasview").hide("fast");
        $("#buttongroup").show("fast");
      });
      //POLICE STATIONS
      $("#police").on("tap", function(){
        $("#buttongroup").hide("fast");
        $("#policeview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=policestation&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('policeview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //FIRE STATTION
      $("#fire").click(function() {
        $("#buttongroup").hide("fast");
        $("#fireview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=mauritiusfire&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('fireview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //HOSPITAL
      $("#hospital").click(function() {
        $("#buttongroup").hide("fast");
        $("#hospitalview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=hospital&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          console.log(data);
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('hospitalview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //BUS STOP
      $("#busstop").click(function() {
        $("#buttongroup").hide("fast");
        $("#busview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=busstation&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          console.log(data);
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('busview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //ATMs
      $("#atm").click(function() {
        $("#buttongroup").hide("fast");
        $("#atmview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=atm&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          console.log(data);
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('atmview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //MUNICIPALITY
      $("#muni").click(function() {
        $("#buttongroup").hide("fast");
        $("#municipalityview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=municipal&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          console.log(data);
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('municipalityview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //BANK
      $("#bank").click(function() {
        $("#buttongroup").hide("fast");
        $("#bankview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=bank&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          console.log(data);
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('bankview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //POST- OFFICE
      $("#post").click(function() {
        $("#buttongroup").hide("fast");
        $("#postview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=postoffice&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          console.log(data);
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('postview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
      //FILLING STATION
      $("#gas").click(function() {
        $("#buttongroup").hide("fast");
        $("#gasview").show("fast");
        var api = "https://places.cit.api.here.com/places/v1/autosuggest?at=" + lat + "," + longitude + "&q=fillingstation&app_id=6HK4rI7nJG7U70E3sSlb&app_code=ojkRjUzTEJR5VLyGobiRIQ";
        $.getJSON(api, function(data) {
          console.log(data);
          var i;
          var a = [];
          var b = [];
          var c = [];
          for (i = 0; i < data.results.length; i++) {
            //Ensuring that values returned by API are not void
            if (data.results[i].position != null) {
              a[i] = data.results[i].position[0];
              b[i] = data.results[i].position[1];
              c[i] = data.results[i].title;
            }

          }
          var mymap = L.map('gasview').setView([lat, longitude], 13);
          L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 19,
            attribution: 'Map data &copy;' +
              '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>' +
              'contributors,<a href="https://creativecommons.org/licenses' +
              '/by-sa/2.0/">CC-BY-SA</a>,Imagery © <a href="https://' +
              'www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc' +
              'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
          }).addTo(mymap);
          //Populating markers on the MAP
          var marker = [];
          var one;
          for (one = 0; one < data.results.length; one++) {
            if (a[one] != null) {
              //Limits Results to Mauritius Only & near to user
              var latlower = parseFloat(lat) - 0.09;
              var latupper = parseFloat(lat) + 0.09;
              var longlower = parseFloat(longitude) - 0.09;
              var longupper = parseFloat(longitude) + 0.09;
              if ((parseFloat(a[one]) >= latlower) && (parseFloat(a[one]) <= latupper)) {
                if ((parseFloat(b[one]) >= longlower) && (parseFloat(b[one]) <= longupper)) {
                  marker[one] = L.marker([a[one], b[one]]).addTo(mymap);
                  marker[one].bindPopup(c[one]).openPopup();
                }
              }
            }
          }
        });
      });
    }); //END OF HOME FUNCTIONALITY
  </script>

<!--
 <script type="text/javascript">
   
function check_login(){

  $.ajax({
  type: "POST",
  url: "https://mandrillapp.com/api/1.0/messages/send.json",
  data: {
    'key': 'I-0X15tL1Gg5JvBb3AJl8A',
    'message': {
      'from_email': 'sudesgopal@gmail.com',
      'to': [
          {
            'email': 'dooshyantram@gmail.com',
            'name': 'dooshyant',
            'type': 'to'
          }
          
        ],
      'autotext': 'true',
      'subject': 'To check',
      'html': 'did you receive it'
    }
  }
 }).done(function(response) {
   console.log(response); // if you're into that sorta thing
 });
}

 </script>
-->


<!-- <script type="text/javascript">
   
 	document.addEventListener('deviceready', function () {
    // cordova.plugins.email is now available
}, false);
 

$("#calc").click(function(){





 cordova.plugins.email.open({
	app: 'gmail',
    to:      'dooshyantram@gmail.com',
    subject: 'Greetings',
    body:    'How are you? Nice greetings from Leipzig'
});






});
</script>-->

<script>

	 $(document).ready(function() {
	$("#calc").click(function(){

	document.addEventListener('deviceready', function () {
    // window.plugin.email is now available
}, false);

window.plugin.email.isServiceAvailable(
    function (isAvailable) {
       alert('Service is not available') unless isAvailable;
    }
);


});
});
</script>
</body>

</html>
